# 戦闘システム概要

---

- [戦闘システム概要](#戦闘システム概要)
  - [ターン制コマンドバトル](#ターン制コマンドバトル)
  - [三すくみ](#三すくみ)
  - [基本コマンド](#基本コマンド)
  - [状態一覧](#状態一覧)
  - [基本パラメータ](#基本パラメータ)
  - [キャラクターパラメータ](#キャラクターパラメータ)
  - [ゲージシステム](#ゲージシステム)
  - [スキルゲージ](#スキルゲージ)
  - [アクションゲージ](#アクションゲージ)
  - [特性](#特性)
  - [テストデータ仕様](#テストデータ仕様)
    - [player\_data](#player_data)
    - [enemy\_data](#enemy_data)

## ターン制コマンドバトル

---

- 3 回連続で同じ手を出すことはできない。2 回連続で同じコマンドを選択した場合、次のターン、そのコマンドは選択肢から消える。**２回連続で同じコマンドを出した後に、一度違うコマンドを挟めば、再び使用可能**
  - できる : `攻`　-->　`攻`　-->　`反`　-->　`攻`　-->　`攻`　-->　...
  - できない: `攻`　-->　`攻`　-->　`攻`

## 三すくみ

---

- `攻`　＞　`反`　＞　`溜`　＞　`攻`　＞ ...
- コマンドの勝敗によって、行動の成功、失敗が決まる
  - 三すくみのじゃんけんでそのターンの結果が決まる
- 詳細なコマンド効果は[基本コマンド](#基本コマンド)参照

## 基本コマンド

---

- 基本コマンド: `攻`、`反`、`溜`の三つ

  - `攻`：`溜`に勝ち、`反`に負ける。
    - 勝ち: `攻撃力`の 1.5 倍のダメージ。
    - 負け: 何も起こらない。
    - あいこ: `攻撃力`分のダメージ。
  - `反`：`攻`に勝ち、`溜`に負ける。
    - 勝ち: `攻撃力`分のダメージ。
    - 負け: 何も起こらない。
    - あいこ: 何も起こらない。
  - `溜`：`反`に勝ち、`攻`に負ける。`溜め`状態の時に必殺技コマンドでじゃんけんに負けると、`溜め`状態が 1 段階下がる
    - 勝ち: `溜め`状態に移行。既に`溜め`状態の時は`溜め`状態に応じて数字を+1。
    - 負け: 何も起こらない。
    - あいこ: 勝ちと同じ。

- `必殺技`: 特殊な条件下でのみ、`攻`コマンドが変化して出現するコマンド。キャラクター毎に`必殺技`コマンドの効果が異なる。
  - 各キャラクターの`必殺技`コマンドに内容は[player_data](#player_data)と[enemy_data](#enemy_data)を参照する
  - 勝敗判定は、`攻`コマンドと全く同じ。
  - `必殺技`コマンドでじゃんけんに負けると、`溜め`状態のレベルが 1 つ下がる。
  - 勝敗に関わらず、一度使用すると攻コマンドに戻る。

## 状態一覧

---

- `溜め`: 溜め 1〜4 のレベルがある。`溜`コマンド成功時に、1 つずつレベルが上がっていく。
  - 溜め 1: 必殺技 1 コマンドが使用可能
  - 溜め 2: 必殺技 2 コマンドが使用可能
  - 溜め 3: 必殺技 3 コマンドが使用可能
  - 溜め 4: 必殺技 3 コマンドが使用可能。相手を行動不能状態に。HP 全回復。次のターン開始時、溜め 3 状態に移行
- `防御`
  - `防御`パラメータ分のダメージを無効化する
  - そのターンが終了すると解除される
- `無防備`
  - 相手の行動を全て通す状態
- `行動不能`
  - １ターン何も行動できない

## 基本パラメータ

---

- `攻撃力`
  - 与えるダメージを決定するパラメータ
- `防御力`
  - 防御状態の時に、数値分のダメージを軽減するパラメータ
- `回復力`
  - 数値分の HP を回復するパラメータ

## キャラクターパラメータ

---

- `HP`
  - 0 になるようなダメージを受けると負ける
- `攻撃`
  - `攻撃力`の計算に使用される
- `防御`
  - `防御力`の計算に使用される
- `回復`
  - `回復力`の計算に使用される

## ゲージシステム

**今回のテストにおいては使用しない＊**

## スキルゲージ

**＊今回のテストにおいては使用しない＊**

## アクションゲージ

**＊今回のテストにおいては使用しない＊**

## 特性

- 各キャラクターが持つ、バトル中常に効果を持つスキル
  - 各キャラクター最大３つまで保有できる

## テストデータ仕様

実装で使用するテストデータは以下とする

### player_data

- name: sordian
- parameter:
  - HP: 50
  - 攻撃: 10
  - 防御: 8
  - 回復: 5
- 特性
  - ハイテンション
    - 効果: 2 回連続でジャンケンに勝つと`溜め`状態+1。あいこを挟むとダメ
- 必殺技コマンド
  - 必殺技 1
    - 効果: 攻撃パラメータ ×3 のダメージ。
  - 必殺技 2:
    - 効果: 攻撃パラメータ ×3 のダメージ。相手は次のターン行動不能
  - 必殺技 3:
    - 効果: 攻撃パラメータ ×10 のダメージ。

### enemy_data

- name: samurai
- parameter
  - HP: 42
  - 攻撃: 8
  - 防御: 5
  - 回復: 6
- 特性
  - ハイテンション
    - 効果: 2 回連続でジャンケンに勝つと`溜め`状態+1。あいこを挟むとダメ
- 必殺技コマンド
  - 必殺技 1
    - 効果: 攻撃パラメータ ×3 のダメージ。
  - 必殺技 2:
    - 効果: 攻撃パラメータ ×3 のダメージ。相手は次のターン行動不能
  - 必殺技 3:
    - 効果: 攻撃パラメータ ×10 のダメージ。
